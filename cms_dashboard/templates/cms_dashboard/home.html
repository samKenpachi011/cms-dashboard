{% extends 'cms_dashboard/base.html' %}
{% load cms_dashboard_extras %}
{% load static %}


{% block extra-styles %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<style>
.my-card
{
    position:absolute;
    left:40%;
    top:-20px;
    border-radius:50%;
}
</style>
{% endblock extra-styles %}

{% block main %}
<div class="text-center">
	<div class="row">
	     <div class="box">
	     	{% if not request.user|has_group:"HR" %}
	     		<div class="icon">
	       			<img src="{% static 'cms_dashboard/images/contract.png' %}" width='100' height='100'/>
	       		</div>
	       	{% endif %}
	     	<h1 style="font-weight:300; font-size:35px; line-height:1.5" class="title">Contract Management Dashboard</h1>
	          <h4><p class="description"><b></b></p></h4> 
	        </div>
	 </div>
</div>
 <hr/>
{% if request.user|has_group:"HR" %}
<div class="jumbotron">
<div class="row w-100">
        <div class="col-md-3">
            <div class="card border-info mx-sm-1 p-3">
                <div class="card border-info shadow text-info p-3 my-card" ><span  aria-hidden="true"></span></div>
                <div class="text-info text-center mt-3"><h4>Total staff/PI/Consultants</h4></div>
                <div class="text-info text-center mt-2"><h1>{{total	}}</h1></div>
                <div style='justify-content:center;align-items:center;display:flex'>
	                <a href="{% url contract_listboard_url %}" class="btn btn-info btn-md" style="background-color:transparent;color:#4682B4">
		       			 All Contracts <i class="fa fa-external-link-alt"></i>
		       		</a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-success mx-sm-1 p-3">
                <div class="card border-success shadow text-success p-3 my-card"><span  aria-hidden="true"></span></div>
                <div class="text-success text-center mt-3"><h4>Total employees</h4></div>
                <div class="text-success text-center mt-2"><h1>{{employees_total}}</h1></div>
                <div style='justify-content:center;align-items:center;display:flex'>
	                <a href="{% url employee_listboard_url %}" class="btn btn-info btn-md" style="background-color:transparent; color:#4682B4">
		       			 Employees <i class="fa fa-external-link-alt"></i>
		       		</a>
		       	</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-danger mx-sm-1 p-3">
                <div class="card border-danger shadow text-danger p-3 my-card" ><span aria-hidden="true"></span></div>
                <div class="text-danger text-center mt-3"><h4>Total PIs</h4></div>
                <div class="text-danger text-center mt-2"><h1>{{pi_total}}</h1></div>
                <div style='justify-content:center;align-items:center;display:flex'>
	                <a href="{% url pi_listboard_url %}" class="btn btn-info btn-md" style="background-color:transparent;color:#4682B4;width:100px">
		       			 PIs <i class="fa fa-external-link-alt"></i>
		       		</a>
		       	</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-warning mx-sm-1 p-3">
                <div class="card border-warning shadow text-warning p-3 my-card" ><span  aria-hidden="true"></span></div>
                <div class="text-warning text-center mt-3"><h4>Total Consultants</h4></div>
                <div class="text-warning text-center mt-2"><h1>{{consultant_total}}</h1></div>
                <div style='justify-content:center;align-items:center;display:flex'>
	               	<a href="{% url consultant_listboard_url %}" class="btn btn-info btn-md" style="background-color:transparent; color:#4682B4">
		       			 Consultants <i class="fa fa-external-link-alt"></i>
		       		</a>
		       	</div>
            </div>
        </div>
     </div>
</div>
<div class="row">

<aside class="col-sm-3">
<div class="card">
	<article class="card-group-item">
		<header class="card-header"><h6 class="title">Overall Contract stats </h6></header>
		<div class="filter-content">
			<div class="list-group list-group-flush">
			  <a href="#" class="list-group-item">Active Contracts <span class="float-right badge badge-light round">{{active_contracts}}</span></a>
			  <a href="#" class="list-group-item">Completed contracts  <span class="float-right badge badge-light round">{{completed_contracts}}</span></a>
			  <a href="#" class="list-group-item">Due Contracts <span class="float-right badge badge-light round">0</span></a>
			</div>  <!-- list-group .// -->
		</div>
	</article> <!-- card-group-item.// -->
</div> <!-- card.// -->
</aside> <!-- col.// -->


<aside class="col-sm-3">
<div class="card">
	<article class="card-group-item">
		<header class="card-header"><h6 class="title">Pi contracts </h6></header>
		<div class="filter-content">
			<div class="list-group list-group-flush">
			  <a href="{% url pi_contract_listboard_url %}" class="list-group-item">PI contracts <span class="float-right badge badge-light round">{{pi_contracts}}</span></a>
			  <a href="{% url pi_contract_listboard_url %}" class="list-group-item">PI active contracts <span class="float-right badge badge-light round">{{active_pis}}</span></a>
			  <a href="{% url pi_contract_listboard_url %}" class="list-group-item">PI completed contracts <span class="float-right badge badge-light round">{{pi_completed}}</span></a>
			</div>  <!-- list-group .// -->
		</div>
	</article> <!-- card-group-item.// -->
</div> <!-- card.// -->
</aside> <!-- col.// -->

<aside class="col-sm-3">
<div class="card">
	<article class="card-group-item">
		<header class="card-header"><h6 class="title">Employee contracts</h6></header>
		<div class="filter-content">
			<div class="list-group list-group-flush">
			  <a href="{% url emp_contract_listboard_url %}" class="list-group-item">Employee contracts <span class="float-right badge badge-light round">{{employee_contracts}}</span> </a>
			  <a href="{% url emp_contract_listboard_url %}" class="list-group-item">Employee active contracts  <span class="float-right badge badge-light round">{{active_employees}}</span></a>
			  <a href="{% url emp_contract_listboard_url %}" class="list-group-item">Employee completed contracts <span class="float-right badge badge-light round">{{employee_completed}}</span></a>
			</div>  <!-- list-group .// -->
		</div>
	</article> <!-- card-group-item.// -->
</div> <!-- card.// -->
</aside> <!-- col.// -->

<aside class="col-sm-3">
<div class="card">
	<article class="card-group-item">
		<header class="card-header"><h6 class="title">Consultant contracts</h6></header>
		<div class="filter-content">
			<div class="list-group list-group-flush">
			  <a href="{% url consultant_contract_listboard_url %}" class="list-group-item">Consultant contracts <span class="float-right badge badge-light round">{{consultant_contracts}}</span> </a>
			  <a href="{% url consultant_contract_listboard_url %}" class="list-group-item">Consultant active contracts  <span class="float-right badge badge-light round">{{active_consultants}}</span></a>
			  <a href="{% url consultant_contract_listboard_url %}" class="list-group-item">Consultant completed contracts <span class="float-right badge badge-light round">{{consultant_completed}}</span></a>
			</div>  <!-- list-group .// -->
		</div>
	</article> <!-- card-group-item.// -->
</div> <!-- card.// -->
</aside> <!-- col.// -->
</div>
{% else %}
<div class="text-center">
 <div class="row" style="width: 70%; margin: 0 auto;">
 	<div class="{%if is_supervisor %} col-md-6 {% else %} col-md-12 {% endif %}">
	     <div class="box">
		       <div class="icon">
		       		<i class="ion-ios-analytics-outline" style="color: #ff689b;"></i>
		       	</div>
		       <p class="h4">
		       		<a href="{% url employee_dashboard_url employee_identifier %}" class="btn btn-default btn-md">
		       			<i class="fa fa-user-circle fa-lg"></i> My Dashboard
		       		</a>
		       </p>
   		</div>
   	</div>

{% if is_supervisor %}
 	<div class="col-md-6">
	     <div class="box">
		    <div class="dropdown">
    			<button class="btn btn-primary btn-md dropdown-toggle" style="background-color:#fff; color:black" type="button" data-toggle="dropdown">Supervisees
    				<span class="caret"></span>
    			</button>
    		<ul class="dropdown-menu dropdown-menu-right">
      			<li><a href="{% url employee_listboard_url %}?p_role=Supervisor">Employees <span class="badge pull-right">{{employee_supervisees}}</span></a></li>
      			<li class="divider"></li>
      			<li><a href="{% url consultant_listboard_url %}?p_role=Supervisor">Consultants <span class="badge pull-right">{{consultant_supervisees}}</span></a></li>
      			<li class="divider"></li>
      			<li><a href="{% url pi_listboard_url %}?p_role=Supervisor">PIs <span class="badge pull-right">{{pi_supervisees}}</span></a></li>
    		</ul>
  			</div>
   		</div>
   	</div>
 {% endif %}
 </div>
</div>
{% endif %}

{% endblock main %}
